<!-- Schedule -->
<div class="form-section">
    <h3 class="section-heading">Schedule</h3>

    {% if not hide_date_fields %}
        <div class="form-group">
            <label for="start_date">Start Date</label>
            <input type="date" name="start_date" id="start_date" required>
        </div>
        <div class="form-group">
            <label for="end_date">End Date (optional)</label>
            <input type="date" name="end_date" id="end_date">
        </div>
    {% else %}
        <div class="form-group">
            <label for="start_date">Start Date</label>
            <input type="date" name="start_date" id="start_date" required value="{{ date.isoformat() }}">
        </div>
        <div class="form-group">
            <label for="end_date">End Date</label>
            <input type="date" name="end_date" id="end_date" required value="{{ date.isoformat() }}">
        </div>
    {% endif %}
        <div class="form-group">
            <label for="start_time">Start Time (optional)</label>
            <input type="time" name="start_time" id="start_time" value="{{ (job.start_time if job is defined else '') }}"
        </div>
        <div class="form-group">
            <label for="end_time">End Time (opional)</label>
            <input type="time" name="end_time" id="end_time" value="{{ (job.end_time if job is defined else '') }}">
        </div>

        <div class="form-group">
            <label for="technician_id">Assign Technician</label>
            <select id="technician_id" name="technician_id">
                <option value="">-- Unassigned --</option>
                {% for t in technicians %}
                    <option value="{{ t.id }}"> {{ t.name }}</option>
                {% endfor %}
                <option value="__BOTH__">Two Man</option>
            </select>
        </div>
</div>

<!-- Job Details -->
<div class="form-section">
    <h3 class="section-heading">Job Details</h3>

    <div class="form-group">
        <label for="type">Type:</label>
        <select name="type" id="type-select" onchange="handleTypeChange(this)">
            <option value="termite">Termite</option>
            <option value="borate">Borate</option>
            <option value="pretreat">Pretreat</option>
            <option value="retreat">Retreat</option>
            <option value="bird work">Bird Work</option>
            <option value="reis">REIs</option>
            <option value="power spray">Power Spray</option>
            <option value="fumigation">Fumigation</option>
            <option value="insulation">Insulation</option>
            <option value="exclusion">Exclusion</option>
            <option value="custom">Custom...</option>
        </select>
    </div>

    <div class="form-group" id="job-name-wrapper">
        <label for="title">Job Name:</label>
        <input type="text" name="title" id="title-field">
    </div>

    <div class="form-group" id="price-wrapper">
        <label for="price">Price:</label>
        <input type="number" name="price" id="price">
    </div>
</div>


<!-- Fumigation Options -->
<div class="form-section hidden" id="fumigation-section">
    <h3 class="section-heading">Fumigation Details</h3>

        <div class="form-group">
            <label><strong>Fumigation Type:</strong></label>

            <div class="radio-group">
                <label><input type="radio" name="fumigation_type" value="Tape and Seal"> Tape & Seal</label>
                <label><input type="radio" name="fumigation_type" value="Tent"> Tent</label>
            </div>
        </div>

        <div class="form-group">
            <label for="target_pest"><strong>Target Pest:</strong></label>
            <select name="target_pest" id="target_pest_select" onchange="toggleCustomPestField(this)">
                <option value="">-- Select a target pest --</option>
                <option value="Bedbugs">Bedbugs</option>
                <option value="Powder Post Beetles">Powder Post Beetles</option>
                <option value="Old House Borers">Old House Borers</option>
                <option value="Carpenter Ants">Carpenter Ants</option>
                <option value="Other">Other (please specify)</option>
            </select>
            <input type="text" name="custom_pest" id="custom_pest_input" class="hidden" placeholder="Enter custom target">
        </div>
</div>

<!-- REI Options -->
<div class="form-section hidden" id="rei-options">
    <h3 class="section-heading">Reinspections (REIs)</h3>

    <div class="form-group">
        <label for="rei_quantity">Quantity</label>
        <input type="number" id="rei_quantity" name="rei_quantity" min="1" step="1" placeholder="e.g., 12">
    </div>

    <div class="form-group">
        <label for="rei_zip">ZIP (5 digits):</label>
        <input type="text" id="rei_zip" name="rei_zip" maxlength="5" pattern="\d{5}" placeholder="e.g., 90210">
    </div>

    <p class="hint">City name will auto-populate from ZIP and be stored as <code>rei_city_name</code>.</p>
</div>

<!-- Custom Job Type -->
<div class="form-section hidden" id="custom-type-div">
    <h3 class="section-heading sm">Custom Type:</h3>
    <div class="form-group">
        <label for="custom_type">Custom Type:</label>
        <input type="text" name="custom_type">
    </div>
</div>

<!-- Exclusion Options -->
<div class="form-section hidden" id="exclusion-options">
    <h3 class="section-heading">Exclusion Options</h3>
    <div class="form-group">
        <label for="exclusion_subtype">Exclusion Type:</label>
        <select name="exclusion_subtype">
            <option value="">-- Select Subtype --</option>
            <option value="Bats">Bats</option>
            <option value="Birds">Birds</option>
            <option value="Mice">Mice</option>
        </select>
    </div>
</div>

<!-- Notes -->
<div class="form-section">
    <h3 class="section-heading">Notes</h3>
    <div class="form-group">
        <label for="notes">Additional Information:</label><br>
        <textarea name="notes" rows="4" placeholder="Optional site notes or special instructions."></textarea>
    </div>
</div>